<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ennajeh Bookstore</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
    .navbar {
                overflow: hidden;
                background-color:lightblue;
                display: flex;           /* Use flexbox to align items */
                justify-content: center; /* Center navbar contents horizontally */
            }
            
    .navbar a {
                float: left;
                font-size: 16px;
                color:black;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
                justify-content: center;
            }
            
    .dropdown {
                float: left;
                overflow: hidden;
            }
            
    .dropdown .dropbtn {
                font-size: 16px;  
                border: none;
                outline: none;
                color: black;
                padding: 14px 16px;
                background-color: inherit;
                font-family: inherit;
                margin: 0;
            }
            
            .navbar a:hover, .dropdown:hover .dropbtn {
                background-color: #eae8e6;
            }
            
            .dropdown-content {
                display: none;
                position: absolute;
                background-color: #f9f9f9;
                min-width: 160px;
                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                z-index: 1;
            }
            
            .dropdown-content a {
                float: none;
                color: black;
                padding: 12px 16px;
                text-decoration: none;
                display: block;
                text-align: left;
            }
            
            .dropdown-content a:hover {
                background-color: #ddd;
            }
            
            .dropdown:hover .dropdown-content {
                display: block;
            }
            * {
            box-sizing: border-box;
            }
        /* Style du conteneur principal */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container1 {
            background-color: #fff;
            width: auto;
            max-width: 100%;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            margin: 20px auto;
            text-align: center;
            margin: 0;
                    }
        .heading {
                text-align: center;
                margin-top: 20px;
                background-image: url(images/R2.jpg);
                height:100px;
                margin:0;
            }

            .heading h3 {
                font-size: 32px;
                color: #333;
            }

            .heading p {
                font-size: 18px;
                color: #777;
            }

            .heading a {
                text-decoration: none;
                color: #777;
            }

            .heading a:hover {
                color: #333;
            }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
            color: #333;
        }

        .cart-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .cart-table thead th {
            padding: 10px;
            background-color: lightblue;
            color: white;
            text-align: center;
        }

        .cart-table tbody td {
            padding: 10px;
            border: 1px solid #e1e1e1;
            text-align: center;
        }

        .cart-table .table-bottom td {
            font-weight: bold;
            color: #333;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: 5px;
        }

        .cart-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .btn, .option-btn, .delete-btn {
            padding: 10px 20px;
            background-color: #f39c12;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover, .option-btn:hover, .delete-btn:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        .disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }


    </style>
</head>
<body>
    <header> <div class="promoslider">
        <marquee>
          <p style="color: white;">Horaires d'ouverture des librairies : de 9h00 à 19h30 et 7 jours sur 7</p>
        </marquee>
      </div>
      <!---->
      <nav class="headertop">
        <div class="logo">
          <img src="images/logo1.png" alt="Ennajeh Bookstore Logo">
        </div>
        
        <div class="search-bar">
          <input type="text" placeholder="Rechercher un livre, un stylo, un panier...">
          <button class="top-cherche-btn" type="submit"><i class="fa fa-search"></i></button>
          
        </div>
       
        <div class="user-options">
          <a href="#" onclick="toggleAccountDropdown(event)" class="container" >
            <img src="images/user.png" alt="Mon compte">
            <span class="text" style="padding-top: 4px;">Mon compte</span> 
          </a>
          <ul class="account-dropdown" style="display: none;">
          <li><a href="login_form.php">Connexion</a></li>
            <li><a href="register_form.php">Inscription</a></li>
          </ul>
          <a href="cart.php" class="container">
            <img src="images/cart.png" alt="Mon panier">
            <span class="text" style="padding-top: 4px;">Panier</span>
          </a>
          <div style="margin-top: 5px;">
          <a href="wishlist.html" class="container">
            <img src="images/wishlist.png" alt="wishlist">
            <span class="text"  style="padding-top: 4px;">Favoris</span>
          </a>
         
        </div>
      </nav>
    </header>


<div class="navbar">
  <a href="proj.php">Accueil</a>
  <div class="dropdown">
    <button class="dropbtn">Livres</i>
    </button>
    <div class="dropdown-content">
      <a href="scolaire.php">Scolaire</a>
      <a href="parascolaire.php">Parascolaire </a>
      <a href="dictionnaire.php">Dictionnaire</a>
    </div>
  </div> 
  
  <div class="dropdown">
    <button class="dropbtn">Papeterie</i>
    </button>
    <div class="dropdown-content">
      <a href="cahier.php">Cahier</a>
      <a href="feuilles.php">Feuilles </a>
      
    </div>
  </div> 
  <a href="fourniture.html">Fourniture Scolaire</a>
  <div class="dropdown">
    <button class="dropbtn">Bagagerie</i>
    </button>
    <div class="dropdown-content">
      <a href="sacados.php">Sac à dos</a>
      <a href="trousse.php">Trousse </a>
      <a href="panier.php">Panier </a>
      
    </div>
  </div> 
</div>

    <div class="heading">
        <h1>Panier</h1>
        <p> <a href="proj.php">Accueil</a> / Panier </p>
    </div>
    <div style="width:auto;" class="container1">
        <h1>Article(s) ajouté(s)</h1>
        <div class="cart-items-container">
            <table class="cart-table">
                <thead>
                    <tr>
                        <th>Image</th>
                        <th>Nom</th>
                        <th>Prix</th>
                        <th>Quantité</th>
                        <th>Prix Total</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="cart-items">
                    <!-- Les articles seront ajoutés ici dynamiquement -->
                </tbody>
                <tr class="table-bottom">
                    <td colspan="4">Grand Total:</td>
                    <td id="grand-total"></td>
                    <td><button id="delete-all-btn" class="delete-btn">Supprimer tout</button></td>
                </tr>
            </table>
        </div>
        <div class="cart-buttons">
            <button id="continue-shopping-btn" class="btn">Continuer vos achats</button>
            <button id="save-cart-btn" class="btn">Enregistrer le panier</button>
        </div>
    </div>
    <footer>
        <div class="footer-container">
          <!-- Block 1: Logo and name -->
          <div class="footer-block footer-logo">
            <h2><u>Ennajeh Bookstore</u></h2>
            <br></br>
            <img src="images/logo1.png" alt="AL KITAB logo" class="logof">
          </div>
          
          <!-- Block 2: Contact links -->
          <div class="footer-block footer-links">
            <h3><u>www.ennajehbookstore.tn</u></h3>
            <br></br>
            <ul>
              <li><a href="#">Infos pratiques</a></li>
              <li><a href="#">Conditions générales</a></li>
              <li><a href="#">Mentions légales</a></li>
              <li><a href="#">Données personnelles</a></li>
              <li><a href="#">Gérer mes cookies</a></li>
            </ul>
          </div>
          
          <!-- Block 3: Help and payment -->
          <div class="footer-block footer-help">
            <h3>Besoin d'aide ?</h3>
            <ul>
              <li><a href="#">Questions fréquentes</a></li>
              <li><a href="#">Nous écrire</a></li>
              <li><a href="#">Hotline eBooks</a></li>
              <li><a href="#">Tarifs de livraison</a></li>
            </ul>
            <br></br>
            <h3>Paiement sécurisé</h3>
            <p>Achetez en toute sérénité </p>
            <div class="payment-methods">
              <img src="images/visa.PNG" alt="Visa">
              <img src="images/mastercard.PNG" alt="MasterCard">
              <img src="images/paypal.PNG" alt="PayPal">
              <!-- More payment method images -->
            </div>
          </div>
          
          <!-- Block 4: Social and newsletter -->
          <div class="footer-block footer-social">
            <h3>Réseaux sociaux</h3>
            <div class="social-icons">
              <a href="#"><img src="images/FB.png" alt="Facebook"></a>
              <a href="#"><img src="images/INSTA (2).png" alt="Instagram"></a>
              <a href="#"><img src="images/YB.png" alt="YouTube"></a>
              <a href="#"><img src="images/linkedin.png" alt="linkedin"></a>
              <a href="#"><img src="images/twitter.png" alt="twitter"></a>
            </div>
            <br></br>
            <h3>Addresse</h3>
            <p>35 Rue de Martyrs, Douar hicher</p>
            <p>La Manouba</p>
            
            <!--<form>
              <input type="email" placeholder="Inscrivez-vous à la newsletter">
              <button type="submit">S'abonner</button>
            </form> -->
            <!--<div class="back-to-top">
              <a href="#top">↑</a>
            </div>-->
            
          </div>
        </div>
        <div class="copyrights">
          <div class="container">
              <div class="row">
                  <div class="col-md-12  col-sm-12">
                      © 2024 Ennajeh Bookstore Tous droits réservés | Réalisation &amp; Référencement <a href="https://www.shyrineprod.com/" target="_blank">ShyrineProd</a>
                  </div>
              </div>
          </div>
      </div>
      </footer>
     
      <script>
        const accountDropdown = document.querySelector('.account-dropdown');
    
        function toggleAccountDropdown(event) {
          event.stopPropagation(); // Prevents click event from affecting other elements
          accountDropdown.style.display = accountDropdown.style.display === 'block' ? 'none' : 'block';
        }
    
        window.addEventListener('click', () => {
          if (accountDropdown.style.display === 'block') {
            accountDropdown.style.display = 'none';
          }
        });
      </script>
    
    
    <!-- custom js file link  -->
    <script src="js/script.js"></script>

    <script>
        // Fonction pour récupérer les données du panier depuis localStorage
        function getCartData() {
            return JSON.parse(localStorage.getItem('cart')) || [];
        }

        // Fonction pour enregistrer les données du panier dans localStorage
        function saveCartData(cartData) {
            localStorage.setItem('cart', JSON.stringify(cartData));
        }

        // Fonction pour afficher les articles du panier sur la page
        function displayCartItems() {
            var cartData = getCartData();
            var cartItemsContainer = document.getElementById('cart-items');
            var grandTotalElement = document.getElementById('grand-total');
            var grandTotal = 0;

            // Effacer le contenu précédent
            cartItemsContainer.innerHTML = '';

            if (cartData.length === 0) {
                cartItemsContainer.innerHTML = '<tr><td colspan="6" class="empty-cart">Votre panier est vide.</td></tr>';
                grandTotalElement.textContent = '0 DT';
                return;
            }

            cartData.forEach(function(item) {
                var subTotal = item.price * item.quantity;
                grandTotal += subTotal;

                var row = document.createElement('tr');

                // Colonne Image
                var imageCell = document.createElement('td');
                var image = document.createElement('img');
                image.src = item.image;
                image.alt = item.name;
                image.classList.add('cart-item-image');
                imageCell.appendChild(image);
                row.appendChild(imageCell);

                // Colonne Nom
                var nameCell = document.createElement('td');
                nameCell.textContent = item.name;
                row.appendChild(nameCell);

                // Colonne Prix
                var priceCell = document.createElement('td');
                priceCell.textContent = item.price + ' DT';
                row.appendChild(priceCell);

                // Colonne Quantité (formulaire)
                var quantityCell = document.createElement('td');
                var quantityForm = document.createElement('form');
                var quantityInput = document.createElement('input');
                quantityInput.type = 'number';
                quantityInput.min = '1';
                quantityInput.value = item.quantity;
                quantityInput.onchange = function() {
                    updateCartItemQuantity(item.id, this.value);
                };
                quantityForm.appendChild(quantityInput);
                quantityCell.appendChild(quantityForm);
                row.appendChild(quantityCell);

                // Colonne Prix Total
                var subTotalCell = document.createElement('td');
                subTotalCell.textContent = subTotal + ' DT';
                row.appendChild(subTotalCell);

                // Colonne Action (Bouton Supprimer)
                var actionCell = document.createElement('td');
                var deleteBtn = document.createElement('button');
                deleteBtn.classList.add('delete-btn');
                deleteBtn.textContent = 'Supprimer';
                deleteBtn.onclick = function() {
                    removeFromCart(item.id);
                };
                actionCell.appendChild(deleteBtn);
                row.appendChild(actionCell);

                cartItemsContainer.appendChild(row);
            });

            grandTotalElement.textContent = grandTotal + ' DT';
        }

        // Fonction pour mettre à jour la quantité d'un article dans le panier
        function updateCartItemQuantity(id, newQuantity) {
            var cartData = getCartData();
            for (var i = 0; i < cartData.length; i++) {
                if (cartData[i].id === id) {
                    cartData[i].quantity = parseInt(newQuantity, 10);
                    break;
                }
            }
            saveCartData(cartData);
            displayCartItems();
        }

        // Fonction pour supprimer un article du panier
        function removeFromCart(id) {
            var cartData = getCartData();
            cartData = cartData.filter(item => item.id !== id);
            saveCartData(cartData);
            displayCartItems();
        }

        // Fonction pour supprimer tous les articles du panier
        function handleEmptyCart() {
            localStorage.removeItem('cart');
            displayCartItems();
        }

        // Fonction pour enregistrer le panier dans le compte de l'utilisateur
        function handleSaveCartToAccount() {
            var cartData = getCartData();
            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'cart.php', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        alert(xhr.responseText);
                    } else {
                        alert('Erreur: ' + xhr.statusText);
                    }
                }
            };
            xhr.send(JSON.stringify({cart: cartData}));
        }

        // Fonction pour continuer les achats
        function handleContinueShopping() {
            window.location.href = 'proj.php'; // Remplacez 'proj.php' par votre page d'accueil
        }

        // Attacher les gestionnaires d'événements aux boutons
        document.getElementById('delete-all-btn').addEventListener('click', handleEmptyCart);
        document.getElementById('save-cart-btn').addEventListener('click', handleSaveCartToAccount);
        document.getElementById('continue-shopping-btn').addEventListener('click', handleContinueShopping);

        // Afficher les articles du panier lors du chargement de la page
        displayCartItems();
    </script>
</body>
</html>

